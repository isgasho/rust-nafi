//! Transformation of NAFI source code into tokens
#![forbid(bad_style, missing_debug_implementations, unconditional_recursion, future_incompatible)]
#![deny(missing_docs, unsafe_code, unused)]

extern crate nafi_tokens as tokens;
#[macro_use]
extern crate nom;
extern crate num;

mod lexer;

pub use tokens::Token;

/// Lex NAFI source into its component tokens
pub fn lex(str: &str) -> Vec<Token> {
    match lexer::tokens(str) {
        nom::IResult::Done(_, tokens) => tokens,
        nom::IResult::Error(e) => unreachable!("Lexer failed to recover from error {}", e),
        nom::IResult::Incomplete(_) => unreachable!("Lexer failed to finish"),
    }
}
